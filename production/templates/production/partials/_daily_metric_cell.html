{% comment %}
Reusable metric cell for daily indicators table.
Expects `metric` dict-like object with keys: actual, previous, previous_delta, status, unit, decimals.
{% endcomment %}
<td class="px-3 py-4 align-top">
  <div class="space-y-1">
    <div class="flex items-center gap-2">
      <p class="text-base font-semibold text-slate-900">
        {% if metric and metric.actual is not None %}
          {{ metric.actual|floatformat:metric.decimals }}{% if metric.unit %} {{ metric.unit }}{% endif %}
        {% else %}
          --
        {% endif %}
      </p>
      {% if metric and metric.status %}
        <span class="rounded-full px-2 py-0.5 text-[11px] font-semibold {% if metric.status == 'high' %}bg-rose-100 text-rose-700{% elif metric.status == 'low' %}bg-sky-100 text-sky-700{% elif metric.status == 'ok' %}bg-emerald-100 text-emerald-700{% else %}bg-slate-200 text-slate-600{% endif %}">
          {% if metric.status == 'high' %}Sobre{% elif metric.status == 'low' %}Bajo{% elif metric.status == 'ok' %}En rango{% else %}Sin dato{% endif %}
        </span>
      {% endif %}
    </div>
    <div class="text-[11px] text-slate-500">
      {% if metric and metric.previous is not None %}
        Ayer {{ metric.previous|floatformat:metric.decimals }}{% if metric.unit %} {{ metric.unit }}{% endif %}
        {% if metric.previous_delta is not None %}
          <span class="font-semibold {% if metric.previous_delta > 0 %}text-rose-600{% elif metric.previous_delta < 0 %}text-emerald-600{% else %}text-slate-600{% endif %}">
            {% if metric.previous_delta > 0 %}+{% endif %}{{ metric.previous_delta|floatformat:metric.decimals }}{% if metric.unit %} {{ metric.unit }}{% endif %}
          </span>
        {% endif %}
      {% else %}
        Sin dato del d√≠a anterior.
      {% endif %}
    </div>
  </div>
</td>
